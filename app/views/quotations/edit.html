<section class="form-view container container-xlg quotation-view">

  <h1><i class="icon-attachment"></i> <strong>OPORTUNIDAD #{{vm.quotation.DocEntry}}</strong></h1>
  <hr/>


  <section class="quotation-data">
    <div layout="row" class="quotation-data-row">
      <div flex="">
        <label for="">Nombre del cliente</label>
        <p>{{vm.quotation.CardName}}</p>
      </div>
      <div flex="">
        <label for="">Fecha de cotización</label>
        <p>{{vm.quotation.CreateDate | date: 'd-MM-yyyy'}}</p>
      </div>
      <div flex="">
        <label for="">Vendedor</label>
        <p>{{vm.quotation.Seller.SlpName}}</p>
      </div>
    </div>

    <div layout="row" class="quotation-data-row">
      <div flex="">
        <label for="">Télefono fijo</label>
        <p>{{vm.quotation.Client.Phone1}}</p>
      </div>
      <div flex="">
        <label for="">Télefono celular</label>
        <p>{{vm.quotation.Client.Cellular}}</p>
      </div>
      <div flex="">
        <label for="">E-mail</label>
        <p>{{vm.quotation.Client.E_Mail}}</p>
      </div>
    </div>

    <div class="quotation-data-row">
      <label for="">Dirección personal (para entrega)</label>
      <p>Calle Cereza</p>
    </div>

  </section>

  <form action="#" class="cart-view container container-xxlg" >

    <div layout="row" layout-align="space-between start">

      <section flex="70" class="cart-list">
        <h1 class="cart-title"><strong>ARTICULOS AGREGADOS</strong></h1>

        <div class="cart-items">

          <div class="cart-item" ng-repeat="detail in vm.quotation.Details">
            <h3>
              <a ng-href="/product/{{detail.Product.ItemCode}}">
                <strong>{{detail.Product.Name || detail.Product.ItemCode}}</strong>
              </a>
            </h3>
            <div layout="row">

              <!--ITEM PROD IMG-->
              <div flex="40" class="cart-item-prod">
                <div layout="row">
                  <div class="cart-item-prod-img">
                    <img ng-src="{{detail.Product.icons[0].url}}" alt="">
                  </div>
                  <div>
                    <ul>
                      <li><strong>Código: </strong> {{detail.Product.ItemCode}}</li>
                      <li ng-repeat="filter in detail.Product.Filters">
                        <strong>{{filter.Name}}: </strong>
                        <span ng-repeat="value in filter.Values track by $index">
                          <span ng-if="value.Handle == 'color-paleta'">Color</span>
                          <span ng-if="value.Handle != 'color-paleta'">{{value.Name}}</span>
                          <span ng-if="$index < (filter.Values.length-1)">,</span>
                        </span>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
              <!--END ITEM PROD IMG-->

              <!--ITEM DATA-->
              <div class="cart-item-data" flex="55">
                <div class="cart-item-data-inner">
                  <div layout="row" layout-align="start center">

                    <div class="cart-item-data-col" flex="45" layout="row" layout-align="start center">
                      <label flex="30"><strong>Colores:</strong></label>
                      <div flex class="input-element select-element-wrapper">
                        <md-input-container>
                          <md-select ng-model="vm.clientTitle" class="select-element" placeholder="Color" required>
                            <md-option ng-value="Cafe">
                              Cafe
                            </md-option>
                          </md-select>
                        </md-input-container>
                      </div>
                    </div>
                    <div class="cart-item-data-col" flex="45" layout="row" layout-align="start center" >
                      <label flex="30"><strong>Formas:</strong></label>
                      <div flex class="input-element select-element-wrapper">
                        <md-input-container>
                          <md-select ng-model="vm.clientTitle" class="select-element" placeholder="Rectangular" required>
                            <md-option ng-value="Cafe">
                              Rectangular
                            </md-option>
                          </md-select>
                        </md-input-container>
                      </div>
                    </div>

                  </div>
                  <div class="cart-item-data-prices" layout="row" layout-align="space-between center">
                    <div flex="30">
                      <p class="price-crossed">{{detail.Product.Price | currency}}</p>
                      <p class="price-hl"><strong>{{detail.Product.Price | currency}}</strong></p>
                    </div>
                    <div flex="30" class="product-view-qty input-element">
                      <div class="input-element-inner">
                        <input ng-model="detail.Quantity" min="1" type="number">
                      </div>
                    </div>
                    <h3 flex class="product-view-price-hl product-view-price-main">
                      <strong>{{detail.Product.Price * detail.Quantity | currency}}</strong>
                    </h3>
                  </div>
                </div>
                <p class="bottom-text"><strong>Entrega:</strong> 1-Abr-2016 (en 8 dias)</p>
              </div>
              <!--END ITEM DATA-->

              <div flex="5" class="cart-item-remove-wrap">
                <a href="#" class="cart-item-remove">
                  x
                </a>
              </div>

            </div>
          </div>


        </div>

      </section>

      <aside flex class="cart-aside">
        <h1 class="cart-title"><i class="icon-carro"><span>3</span></i> <strong>MI CARRITO</strong></h1>

        <div class="cart-summary">
          <table>
            <tr>
              <td><strong>Subtotal ({{ vm.getTotalProducts() }} productos):</strong></td>
              <td><strong>{{ vm.getTotalPrice() | currency }}</strong></td>
            </tr>
            <tr>
              <td>Descuento:</td>
              <td><strong>-$12,097</strong></td>
            </tr>
            <tr>
              <td>Costo de envío:</td>
              <td><strong>GRATIS</strong></td>
            </tr>
          </table>
          <hr>

          <div>
            <h5 class="cart-summary-toggler">
              <a href="" ng-click="vm.togglePrices = !vm.togglePrices"><strong>MÁXIMO DESCUENTO</strong> <img src="images/arrow-down.png" alt=""></a>
            </h5>
            <table ng-show="!vm.togglePrices">
              <tr>
                <td>Precio Lista:</td>
                <td><strong>$24,399</strong></td>
              </tr>
              <tr>
                <td>Pago único (<strong class="hl-price">-20%</strong>)</td>
                <td><span class="crossed">$24,399</span> | <strong class="hl-price">$19,519</strong> </td>
              </tr>
              <tr>
                <td>6 MSI Banamex (<strong class="hl-price">-15%</strong>)</td>
                <td><span class="crossed">$24,399</span> | <strong class="hl-price">$20,739</strong> </td>
              </tr>
              <tr>
                <td>12 MSI Santander (<strong class="hl-price">-10%</strong>)</td>
                <td><span class="crossed">$24,399</span> | <strong class="hl-price">$21,959</strong> </td>
              </tr>
            </table>
          </div>

          <hr>
          <div class="cart-totals" layout="row" layout-align="space-between end">
            <div flex="50">
              <h1><strong>TOTAL:</strong></h1>
            </div>
            <div flex="50">
              <h3 class="price-crossed">{{ vm.getTotalPrice() | currency }}</h3>
              <h1 class="price-main">{{ vm.getTotalPrice() | currency }}</h1>
            </div>
          </div>

          <input type="submit" value="CONTINUAR" class="cart-view-btn">

          <p class="cart-summary-note">*Precios en Pesos Mexicanos con impuestos incluidos.</p>

        </div>

      </aside>

    </div>


  </form>


  <section class="records-view">
    <h1><i class="icon-attachment"></i> <strong>BITÁCORA DE SEGUIMIENTO</strong></h1>

    <p><strong>CREAR NUEVO EVENTO</strong></p>
    <hr/>

    <form class="new-record">
      <div layout="row" layout-align="space-between start
      ">
        <div flex="40">
          <div class="input-element textarea-element">
            <label><strong>NOTAS</strong></label>
            <div class="input-element-inner">
              <textarea rows="5"></textarea>
            </div>
          </div>
        </div>
        <div flex="55">
          <div layout="row" layout-align="space-between center">

            <div flex="30" class="input-element select-element-wrapper">
              <label><strong>Tipo de evento</strong></label>
              <md-input-container>
                <md-select ng-model="vm.deod" class="select-element" placeholder="Tipo de evento" >
                  <md-option ng-repeat="recordType in vm.recordTypes" ng-value="recordType">
                    {{recordTypes}}
                  </md-option>
                </md-select>
              </md-input-container>
            </div>

            <div flex="30" class="input-element select-element-wrapper">
              <label><strong>Fecha de seguimiento</strong></label>
              <md-input-container>
                <md-select ng-model="vm.deod" class="select-element" placeholder="Tipo de evento" >
                  <md-option ng-repeat="recordType in vm.recordTypes" ng-value="recordType">
                    {{recordTypes}}
                  </md-option>
                </md-select>
              </md-input-container>
            </div>

            <div flex="30" class="input-element select-element-wrapper">
              <label><strong>Hora de seguimiento</strong></label>
              <md-input-container>
                <md-select ng-model="vm.deod" class="select-element" placeholder="Tipo de evento" >
                  <md-option ng-repeat="recordType in vm.recordTypes" ng-value="recordType">
                    {{recordTypes}}
                  </md-option>
                </md-select>
              </md-input-container>
            </div>

          </div>

          <div layout="row" layout-align="space-between center" class="attachments-section">
            <div flex="30">
              <a href="#">
                <strong><i class="icon-attatch"></i>ADJUNTAR ARCHIVO</strong>
              </a>
            </div>
            <div flex="30">
              <a href="#">
                <strong><i class="icon-attachment"></i>ADJUNTAR IMÁGEN</strong>
              </a>
            </div>
            <div flex="30">
              <a href="#">
                <strong><i class="icon-photo"></i>TOMAR FOTO</strong>
              </a>
            </div>
          </div>

          <a href="#" class="action-btn">Guardar nuevo evento en la bitácora</a>

        </div>

        <hr/>

      </div>
    </form>

    <table class="records-table">
      <thead>
        <tr>
          <td>FECHA/HORA EVENTO</td>
          <td>EVENTO</td>
          <td>USUARIO</td>
          <td>FECHA SEGUIMIENTO</td>
          <td>ARCHIVO</td>
          <td>DETALLES</td>
        </tr>
      </thead>
      <tbody ng-repeat="record in vm.records">
        <tr>
          <td>{{record.date}}</td>
          <td>{{record.eventType}}</td>
          <td>{{record.user}}</td>
          <td>{{record.recordDate}}</td>
          <td>{{record.files}}</td>
          <td>
            <a ng-click="record.isActive = !record.isActive" href="#">
              VER DETALLES <img src="/images/arrow-down.png" alt="">
            </a>
          </td>
        </tr>
        <tr ng-show="record.isActive">
          <td  colspan="6" class="inner-content">
            <div class="record-item">
              <div class="record-item-block" layout="row" layout-align="space-between start">
                <div flex="55">
                  <p><label><strong>NOTAS</strong></label></p>
                  <textarea name="" id="" rows="7">
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                  </textarea>
                </div>
                <div flex="40" class="center-content">
                  <p><strong>ARCHIVOS ADJUNTOS (1)</strong></p>
                </div>
              </div>
              <div class="record-item-block" layout="row" layout-align="space-between start">
                <div flex="55">
                  <p><label><strong>AGREGAR COMENTARIOS</strong></label></p>
                  <textarea name="" id="" rows="7"></textarea>
                </div>
                <div flex="40">
                  <p><label><strong>DECLARAR COMO PERDIDA:</strong></label></p>
                  <select>
                    <option value="">El tiempo de entrega fué muy largo</option>
                    <option value="">El tiempo de entrega fué muy largo</option>
                    <option value="">El tiempo de entrega fué muy largo</option>
                  </select>
                  <a href="#" class="action-btn">CERRAR OPORTUNIDAD</a>
                </div>
              </div>
            </div>
          </td>
        </tr>

      </tbody>
    </table>

  </section>



</section>
