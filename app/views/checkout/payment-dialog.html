<md-dialog class="deposit-dialog" aria-label="Terminal"  ng-cloak>
  <div class="deposit-dialog-inner">
    <h2><i class="icon-transfer"></i> APLICA <strong>EL PAGO</strong> COMO SE INDICA</h2>
    <hr />
    <p ng-if="payment.terminals">
      <strong>Terminal:</strong> <small>Solo se puede cobrar en esta terminal bancaria.</small>
    </p>
    <div class="dialog-block" layout="row" layout-align="space-between end">
      <div flex="45" ng-if="payment.terminals">
        <div class="input-element select-element-wrapper">
          <md-select ng-model="payment.terminal" class="select-element">
            <md-option
              ng-repeat="terminal in payment.terminals track by $index"
              ng-selected="$index==0"
              ng-value="terminal">
              {{terminal}}
            </md-option>
          </md-select>
        </div>

      </div>
      <div flex="50" ng-if="payment.msi">
        <h3><strong>{{payment.msi}}</strong> Meses SIN INTERESES</h3>
      </div>
    </div>

    <div class="dialog-block" >
      <p>
        <strong>Cantidad:</strong> <small>Se muestra el saldo total pendiente por cobrar. Puedes cobrar cualquier monto menor, pero después debes aplicar otro cobro para saldar esta venta.</small>
      </p>
      
      <p ng-if="payment.ammount > maxAmmount">
        Máximo excedido
      </p>

      <div class="ammount-input" layout="row" layout-align="start center">
        <div class="input-element" flex="60">
          <div class="input-element-inner">
            <input
              ng-if="maxAmmount && maxAmmount >=0"
              type="text"
              max="{{maxAmmount}}"
              ng-model="payment.ammount"
              ui-money-mask>
            <input
              ng-if="!maxAmmount"
              type="text"
              ng-model="payment.ammount"
              ui-money-mask>

          </div>
        </div>
        <div class="currency-label">
          <span ng-if="payment.currency != 'usd'">MXN</span>
          <span ng-if="payment.currency == 'usd'">USD ({{ getAmmountMXN(payment.ammount) | currency}} MXN)</span>
        </div>
      </div>
      <p ng-if="payment.currency == 'usd'">
        <small>Tipo de cambio: {{payment.exchangeRate | currency}} MXN</small>
      </p>
    </div>

    <div  layout="row" layout-align="space-between end">
      <div ng-if="needsVerification" flex="45">
        <p><strong># AUTORIZACIÓN:</strong></p>
        <p><small>Ingresa el # de autorización de esta transacción</small></p>
      </div>
      <div ng-if="needsVerification" flex="20" class="input-element">
        <div class="input-element-inner">
          <input type="text" ng-model="payment.verificationCode" required>
        </div>
      </div>
      <div flex="75" ng-if="!needsVerification"></div>
      <a 
        ng-click="save()"
        ng-class="{'action-btn-disabled': isValidPayment() }" 
        class="action-btn action-btn-save" 
        href="#" 
        flex="25">
        <strong>GUARDAR</strong>
      </a>
    </div>
  </div>
</md-dialog>
