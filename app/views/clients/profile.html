<div ng-if="vm.isLoading" layout-fill layout="row" layout-sm="column" layout-align="center center">
  <md-progress-circular class="md-accent" md-diameter="100px"></md-progress-circular>
</div>

<section ng-if="!vm.isLoading" class="form-view container container-xlg">
  <h1><i class="icon-login"></i> <strong>PERFIL DEL CLIENTE</strong></h1>

  <div layout="row" layout-align="end start" class="action-links">
    <div flex="30">
      <h4>
        <a href="#" ng-click="vm.createQuotation()">
          <i class="icon-oportunidades"></i> CREAR NUEVA COTIZACIÓN
        </a>
      </h4>
    </div>
  </div>

  <div ng-show="vm.isLoading" layout-fill layout="row" layout-sm="column" layout-align="space-around">
    <md-progress-circular md-mode="indeterminate"  md-diameter="150"></md-progress-circular>
  </div>

  <!--START FORM-->
  <section ng-show="!vm.isLoading" class="form-view-content">

    <p class="form-view-hint"><strong>SELECCIONA UNA PESTAÑA</strong> | PARA VISUALIZAR Y/O EDITAR LA INFORMACIÓN REQUERIDA</p>

    <section class="form-section">

      <div layout="row" class="form-section-tabs">
        <div
          flex="25"
          ng-click="vm.activeTab = 0"
          class="form-section-tab"
          ng-class="{'form-section-tab-active': vm.activeTab == 0}">
          <a href="#">Datos personales</a>
        </div>
        <div
          flex="25"
          ng-click="vm.activeTab = 1"
          class="form-section-tab"
          ng-class="{'form-section-tab-active': vm.activeTab == 1}">
          <a href="#">Datos de facturación</a>
        </div>
        <div
          flex="25"
          ng-click="vm.activeTab = 2"
          class="form-section-tab"
          ng-class="{'form-section-tab-active': vm.activeTab == 2}">
          <a href="#">Datos de pago</a>
        </div>
        <div
          flex="25"
          ng-click="vm.activeTab = 3"
          class="form-section-tab"
          ng-class="{'form-section-tab-active': vm.activeTab == 3}">
          <a href="#">Datos de envío</a>
        </div>

      </div>

      <!--DATOS PERSONALES-->
      <section ng-show="vm.activeTab==0" action="#" class="form-section-content">

        <div layout="row">

          <div flex="20" class="input-element select-element-wrapper">
            <label><strong>Titulo</strong></label>
            <md-select ng-model="vm.client.Info.title" class="select-element">
              <md-option ng-repeat="title in vm.titles" ng-value="title.value">
                {{title.label}}
              </md-option>
            </md-select>
          </div>

          <div flex="20" class="input-element select-element-wrapper">
            <label><strong>Sexo</strong></label>
            <md-select ng-model="vm.client.Info.gender" class="select-element">
              <md-option ng-selected="vm.client.Info.gender == gender.value"  ng-repeat="gender in vm.genders" ng-value="gender.value">
                {{gender.label}}
              </md-option>
            </md-select>
          </div>

          <div flex="20" class="input-element">
            <label><strong>Fecha de nacimiento <span class="hl-label">*</span></strong></label>
            <div class="input-element-inner">
              <input type="text" pikaday="vm.client.birthDate" readonly year-range="[1900,2016]" show-month-after-year="true" on-select="onPikadaySelect(pikaday)">
            </div>
          </div>

        </div>

        <div layout="row">
          <div flex="20" class="input-element">
            <label><strong>Nombre(s) del cliente <span class="hl-label">*</span></strong></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.firstName" required>
            </div>
          </div>

          <div flex class="input-element">
            <label><strong>Apellido paterno <span class="hl-label">*</span></strong></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.lastName" required>
            </div>
          </div>

          <div flex class="input-element">
            <label><strong>Apellido materno</strong></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.secondLastName" required>
            </div>
          </div>
        </div>

        <div layout="row">

          <div flex="20" class="input-element">
            <label><strong>Teléfono fijo <span class="hl-label">*</span></strong></label>
            <div layout="row" layout-align="space-between center">
                <div flex="30" class="input-element-inner">
                  <input type="text" ng-model="vm.client.dialCode" placeholder="Lada" required>
                </div>
                <div flex="60" class="input-element-inner">
                  <input type="text" ng-model="vm.client.Phone1" required>
                </div>
            </div>
          </div>


          <div flex="20" class="input-element">
            <label><strong>Teléfono celular <span class="hl-label">*</span></strong></label>
            <div layout="row" layout-align="space-between center">
                <div flex="30" class="input-element-inner">
                  <input type="text" ng-model="vm.client.mobileDialCode" placeholder="Lada" required>
                </div>
                <div flex="60" class="input-element-inner">
                  <input type="text" ng-model="vm.client.mobilePhone" required>
                </div>
            </div>
          </div>


          <div flex class="input-element">
            <label><strong>Email</strong> <span class="hl-label">*</span></label>
            <div class="input-element-inner">
              <!--SOLO HACER UPDATE SI ESTA VACIO-->
              <input type="email" ng-if="!vm.client.E_Mail" ng-model="vm.client.E_Mail" required>
              <input type="email" ng-if="vm.client.E_Mail" ng-model="vm.client.E_Mail" readonly required>

            </div>
          </div>

         <div flex class="input-element">
            <label><strong>Confirmar email</strong> <span class="hl-label">*</span></label>
            <div class="input-element-inner">
              <input type="email" ng-if="!vm.client.E_Mail" ng-model="vm.client.E_Mail" required>
              <input type="email" ng-if="vm.client.E_Mail" ng-model="vm.client.E_Mail" readonly required>
            </div>
          </div>

        </div>

      </section>
      <!--END DATOS PERSONALES-->


      <!--DATOS DE FACTURACION-->
      <section ng-show="vm.activeTab==1" action="#" class="form-section-content">

        <div layout="row">
          <div flex="45" class="input-element">
            <label><strong>Razón social <span class="hl-label">*</span></strong></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.bussinessLegalName" required>
            </div>
          </div>

          <div flex="45" class="input-element">
            <label><strong>Nombre de la empresa <span class="hl-label">*</span></strong></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.bussinessName" required>
            </div>
          </div>
        </div>

        <div layout="row">
          <div flex="20" class="input-element">
            <label><strong>RFC <span class="hl-label">*</span></strong></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.rfc" required>
            </div>
          </div>

          <div flex="25" class="input-element">
            <label><strong>Teléfono <span class="hl-label">*</span></strong></label>
            <div layout="row" layout-align="space-between center">
                <div flex="35" class="input-element-inner">
                  <input type="text" ng-model="vm.client.invoiceDialCode" placeholder="Lada" required>
                </div>
                <div flex="60" class="input-element-inner">
                  <input type="text" ng-model="vm.client.invoicePhone" required>
                </div>
            </div>
          </div>

          <div flex="30" class="input-element">
            <label><strong>Email</strong></label>
            <div class="input-element-inner">
              <input type="email" ng-model="vm.client.invoiceEmail" required>
            </div>
          </div>
        </div>


        <h4>DIRECCIÓN FISCAL</h4>
        <div layout="row">

          <div flex="20" class="input-element">
            <label><strong>Calle <span class="hl-label">*</span></strong></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.invoiceStreet" required>
            </div>
          </div>

          <div flex="10" class="input-element">
            <label><strong>No. exterior <span class="hl-label">*</span></strong></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.invoiceExternalNumber" required>
            </div>
          </div>

          <div flex="10" class="input-element">
            <label><strong>No. interior <span class="hl-label">*</span></strong></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.invoiceInternalNumber" required>
            </div>
          </div>

          <div flex="25" class="input-element">
            <label><strong>Colonia <span class="hl-label">*</span></strong></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.invoiceNeighborhood" required>
            </div>
          </div>

          <div flex="20" class="input-element">
            <label><strong>Municipio <span class="hl-label">*</span></strong></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.invoiceMunicipality" required>
            </div>
          </div>

        </div>

        <div layout="row">

          <div flex="20" class="input-element">
            <label><strong>Ciudad <span class="hl-label">*</span></strong></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.invoiceCity" required>
            </div>
          </div>


          <div flex="30" class="input-element select-element-wrapper">
            <label><strong>Estado</strong></label>
            <md-select ng-model="vm.client.invoiceEntity" class="select-element">
              <md-option ng-repeat="state in vm.states" ng-value="state.name">
                {{state.name}}
              </md-option>
            </md-select>
          </div>

          <div flex="15" class="input-element">
            <label><strong>Código postal <span class="hl-label">*</span></strong></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.invoiceZipCode" required>
            </div>
          </div>

        </div>

      </section>
      <!--END DATOS FACTURACION-->


      <!--DATOS DE PAGO-->
      <section ng-show="vm.activeTab==2" action="#" class="form-section-content">

        <hr>

        <h4><strong>AGREGAR UNA TARJETA DE CRÉDITO O DÉBITO</strong></h4>

        <div layout="row">
          <div flex="45" class="input-element">
            <label><strong>Nombre(s) del titular <span class="hl-label">*</span> <span class="hint">(Tal cual aparece en el plastico)</span></strong></label>
            <div class="input-element-inner">
              <input type="text" required>
            </div>
          </div>

          <div flex="45" class="input-element">
            <label><strong>Apellidos del titular <span class="hl-label">*</span> <span class="hint">(Tal cual aparece en el plastico)</span></strong></label>
            <div class="input-element-inner">
              <input type="text" required>
            </div>
          </div>
        </div>

        <div layout="row">
          <div flex="45" class="input-element">
            <label><strong>Número de tarjeta  <span class="hint">(Ingresar los 16 dígitos)</span> <span class="hl-label">*</span></strong></label>
            <div class="input-element-inner">
              <input type="text" required>
            </div>
          </div>

          <div flex="25" class="input-element select-element-wrapper">
            <label><strong>País</strong> <span class="hint">(Selecciona de la lista) *</span></label>

            <select ng-model="vm.clientCountry" class="select-element">
              <option ng-repeat="country in vm.countries" ng-value="country.code">
                {{country.name}}
              </option>
            </select>

          </div>

          <div flex="15" class="input-element">
            <label><strong>Código postal <span class="hl-label">*</span></strong></label>
            <div class="input-element-inner">
              <input type="text" required>
            </div>
          </div>

        </div>

        <div layout="row">

          <div flex="20" class="input-element">
            <label><strong>Fecha de vencimiento <span class="hl-label">*</span></strong></label>
            <div layout="row" layout-align="space-between center">
                <div flex="45" class="input-element-inner">
                  <input type="text" placeholder="mm" required>
                </div>
                <div flex="45" class="input-element-inner">
                  <input type="text" placeholder="aa" required>
                </div>
            </div>
          </div>


          <div flex="35" class="input-element">
            <label><strong>Alias <span class="hl-label">*</span></strong></label>
            <div class="input-element-inner">
              <input type="text" required>
            </div>
          </div>

        </div>

      </section>
      <!--END DATOS PAGO-->


      <!--DATOS DEL ENVIO-->
      <section  ng-show="vm.activeTab==3" action="#" class="form-section-content">

        <p class="copy-data">
          <a href="#" ng-click="vm.personalDataToDelivery()">Copiar de datos personales</a>
        </p>

        <div layout="row">
          <div flex="45" class="input-element">
            <label><strong>Nombre(s) del destinatario <span class="hl-label">*</span></strong></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.deliveryName" required>
            </div>
          </div>

          <div flex="45" class="input-element">
            <label><strong>Apellidos del destinatario <span class="hl-label">*</span></strong></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.deliveryLastName" required>
            </div>
          </div>

        </div>

        <div layout="row">

          <div flex="20" class="input-element">
            <label><strong>Teléfono fijo <span class="hl-label">*</span></strong></label>
            <div layout="row" layout-align="space-between center">
                <div flex="30" class="input-element-inner">
                  <input type="text" ng-model="vm.client.deliveryDialCode" placeholder="Lada" required>
                </div>
                <div flex="60" class="input-element-inner">
                  <input type="text" ng-model="vm.client.deliveryPhone" required>
                </div>
            </div>
          </div>


          <div flex="20" class="input-element">
            <label><strong>Teléfono celular <span class="hl-label">*</span></strong></label>
            <div layout="row" layout-align="space-between center">
                <div flex="30" class="input-element-inner">
                  <input type="text" ng-model="vm.client.deliveryMobileDialCode" placeholder="Lada" required>
                </div>
                <div flex="60" class="input-element-inner">
                  <input type="text"  ng-model="vm.client.deliveryMobilePhone" required>
                </div>
            </div>
          </div>


          <div flex class="input-element">
            <label><strong>Email</strong> <span class="hl-label">*</span></label>
            <div class="input-element-inner">
              <input type="email" ng-model="vm.client.deliveryEmail" required>
            </div>
          </div>

         <div flex class="input-element">
            <label><strong>Confirmar email</strong> <span class="hl-label">*</span></label>
            <div class="input-element-inner">
              <input type="email" ng-model="vm.client.deliveryEmail" required>
            </div>
          </div>

        </div>

        <h4><strong>DIRECCIÓN DE ENTREGA</strong> (Buscar con Google Maps)</h4>
        <div layout="row">
          <div flex class="input-element">
            <label><strong>Calle</strong> <span class="hl-label">*</span></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.deliveryStreet" required>
            </div>
          </div>
          <div flex class="input-element">
            <label><strong>No. exterior</strong> <span class="hl-label">*</span></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.deliveryExternalNumber" required>
            </div>
          </div>
          <div flex class="input-element">
            <label><strong>No. interior</strong> <span class="hl-label">*</span></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.deliveryInternalNumber" required>
            </div>
          </div>
          <div flex class="input-element">
            <label><strong>Colonia</strong> <span class="hl-label">*</span></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.deliveryNeighborhood" required>
            </div>
          </div>
          <div flex class="input-element">
            <label><strong>Municipio</strong> <span class="hl-label">*</span></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.deliveryMunicipality" required>
            </div>
          </div>
        </div>

        <div layout="row">
          <div flex="25" class="input-element">
            <label><strong>Ciudad</strong> <span class="hl-label">*</span></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.deliveryCity"  required>
            </div>
          </div>
          <div flex="25" class="input-element select-element-wrapper">
            <label><strong>Estado</strong> <span class="hl-label">*</span></label>
            <select ng-model="vm.client.deliveryEntity" class="select-element">
              <option ng-repeat="state in vm.states" ng-value="state.name">
                {{state.name}}
              </option>
            </select>
          </div>
          <div flex="15" class="input-element">
            <label><strong>Codigo postal</strong> <span class="hl-label">*</span></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.deliveryZipCode" required>
            </div>
          </div>

        </div>

        <div layout="row">
          <div flex="25" class="input-element">
            <label><strong>Entre calle</strong> <span class="hl-label">*</span></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.deliveryStreet" required>
            </div>
          </div>
          <div flex="25" class="input-element">
            <label><strong>Y calle</strong> <span class="hl-label">*</span></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.deliveryStreet2" required>
            </div>
          </div>
          <div flex="25" class="input-element">
            <label><strong>Referencias cercanas</strong> <span class="hl-label">*</span></label>
            <div class="input-element-inner">
              <input type="text" ng-model="vm.client.deliveryReferences" required>
            </div>
          </div>

        </div>

      </section>

      <div layout="row" class="form-view-btns" layout-align="center center">
        <a ng-click="vm.update()" href="" flex="70" class="form-view-btn form-view-btn-primary">Guardar información</a>
      </div>


    </section>
    <!--END FORM SECTION-->


  </section>
  <!--END PROFILE EDIT-->


  <h1><strong>HISTORIAL POR SEGMENTOS</strong></h1>

  <section class="table-list-wrap">
    <label><strong>OPORTUNIDADES</strong></label>
    <hr>
    <div
      ng-if="vm.client"
      table-list
      class="table-list"
      columns="vm.columnsLeads"
      filters="vm.extraParamsLeads"
      api-resource="vm.apiResourceLeads">
    </div>
  </section>

  <section class="table-list-wrap">
    <label><strong>PEDIDOS</strong></label>
    <hr>
    <div
      table-list
      ng-if="vm.client"
      class="table-list"
      columns="vm.columnsOrders"
      filters="vm.extraParamsSales"
      api-resource="vm.apiResourceOrders">
    </div>
  </section>


</section>
